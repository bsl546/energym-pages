
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Getting Started &#8212; energym 2020.02.19 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="Examples.html" />
    <link rel="prev" title="Minimal Installation" href="install_min.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
    <a class="navbar-brand" href="../index.html">
      <p class="title">energym</p>
    </a>
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="base.html">
  Buildings
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="install_min.html">
  Minimal Installation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="Examples.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="install_full.html">
  Full Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="add_model.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="apiref.html">
  API Reference
 </a>
</li>

        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-an-environment">
   Setting up an Environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interacting-with-the-environment">
   Interacting with the Environment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-forecasts">
   Getting Forecasts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#activating-the-evaluation-mode">
   Activating the Evaluation Mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#evaluating-control-performance">
   Evaluating Control Performance
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-wrappers">
   Using Wrappers
  </a>
 </li>
</ul>

</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="getting-started">
<span id="start"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Energym provides simulation environments for building control, without assuming any familiarity with the underlying simulation frameworks. The application of control strategies and their performance evaluation is made simple.</p>
<p>This document provides an introduction to Energym and its functionalities. For more sophisticated examples, see <a class="reference internal" href="Examples.html#examples"><span class="std std-ref">Examples</span></a>.</p>
<div class="section" id="installation">
<span id="my-installation"></span><h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Energym can be installed in two ways:</p>
<ul class="simple">
<li><p>via a <strong>minimal installation</strong>, that can be used to run Energym models, benchmark controllers, but not compile new or existing models; See <a class="reference internal" href="install_min.html#install-min"><span class="std std-ref">Minimal Installation</span></a>.</p></li>
<li><p>via a <strong>full installation</strong>, that requires to install all dependencies to compile new models. This installation mode should only be used by users willing to contribute to Energym models library; See <a class="reference internal" href="install_full.html#install-full"><span class="std std-ref">Full Installation</span></a>.</p></li>
</ul>
<p>To ease  installation on shared machines/cloud or run the library on Mac OS, two dockerfiles are provided:</p>
<ul class="simple">
<li><p>a standard dockerfile (called Dockerfile)  that downloads a pre-built image from Dockerhub with Ubuntu 20.04 and installs the library.</p></li>
<li><p>a JModelica dockerfile (called JModelica)  that downloads a pre-built image from Dockerhub with Ubuntu 18.04, JModelica and EnergyplustoFMU. It uses the latest freely available version of JModelica as well as Python2.7.</p></li>
</ul>
<p>For more details, see <a class="reference internal" href="install_full.html#install-full"><span class="std std-ref">Full Installation</span></a>.</p>
</div>
<div class="section" id="setting-up-an-environment">
<h2>Setting up an Environment<a class="headerlink" href="#setting-up-an-environment" title="Permalink to this headline">¶</a></h2>
<p>To use Energym, it has to be imported like any other Python module using the command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">energym</span>
</pre></div>
</div>
<p>A simulation environment can then be created using the <code class="docutils literal notranslate"><span class="pre">make</span></code> command. Here we demonstrate the usage for the model <a class="reference internal" href="ap2g.html#apartments2grid"><span class="std std-ref">Apartments2Grid-v0</span></a>.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">envName</span> <span class="o">=</span> <span class="s2">&quot;Apartments2Grid-v0&quot;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">energym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">envName</span><span class="p">)</span>
</pre></div>
</div>
<p>To create a simulation environment with a different model, substitute <code class="docutils literal notranslate"><span class="pre">envName</span></code> with a string containing the name of one of the available models (see e.g. here <a class="reference internal" href="../index.html#envs"><span class="std std-ref">Available environments</span></a>).</p>
</div>
<div class="section" id="interacting-with-the-environment">
<h2>Interacting with the Environment<a class="headerlink" href="#interacting-with-the-environment" title="Permalink to this headline">¶</a></h2>
<p>Once the environment has been created, control actions can be passed to it via the <code class="docutils literal notranslate"><span class="pre">step</span></code> method. The control actions are provided as a dictionary with pairs of input variable names and values. After performing the simulation step an observation dictionary is returned, containing output value names and their corresponding values. The inputs that have to be provided and the outputs are different for every model, their value references can be seen in their individual documentations under <a class="reference internal" href="base.html#buildings"><span class="std std-ref">Buildings</span></a>.
In code, this looks as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;P1_T_Thermostat_sp&#39;</span><span class="p">:[</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;P2_T_Thermostat_sp&#39;</span><span class="p">:[</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;P3_T_Thermostat_sp&#39;</span><span class="p">:[</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;P4_T_Thermostat_sp&#39;</span><span class="p">:[</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;Bd_Pw_Bat_sp&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;Bd_Ch_EV1Bat_sp&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;Bd_Ch_EV2Bat_sp&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">]}</span>
<span class="n">outputs</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-forecasts">
<h2>Getting Forecasts<a class="headerlink" href="#getting-forecasts" title="Permalink to this headline">¶</a></h2>
<p>Each environment has a get_forecast() method, with which the user can retrieve meteorological and (depending on the environment) other stochastic forecasts. To get the current forecasts,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">forecast</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_forecast</span><span class="p">(</span><span class="n">forecast_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>is used. It outputs a dictionary with the forecasted keys over the horizon forecast_length.</p>
</div>
<div class="section" id="activating-the-evaluation-mode">
<h2>Activating the Evaluation Mode<a class="headerlink" href="#activating-the-evaluation-mode" title="Permalink to this headline">¶</a></h2>
<p>The evaluation mode fixes simulation parameters for each environment to guarantee comparability in the controller evaluation. To create an environment in simulation mode, simply call</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="o">=</span> <span class="n">energym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">env_name</span><span class="p">,</span> <span class="n">eval_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If the environment is in simulation mode, all other optional parameters of the <code class="docutils literal notranslate"><span class="pre">make</span></code> method are ignored and set to default values.</p>
</div>
<div class="section" id="evaluating-control-performance">
<h2>Evaluating Control Performance<a class="headerlink" href="#evaluating-control-performance" title="Permalink to this headline">¶</a></h2>
<p>Each environment has a <a class="reference internal" href="apiref.html#kpi-doc"><span class="std std-ref">KPI</span></a> object, which keeps track of the evaluation metrics. Which evaluation metrics get tracked is determined by the <code class="docutils literal notranslate"><span class="pre">kpi_options</span></code> parameter for each model (see the <a class="reference internal" href="apiref.html#model-doc"><span class="std std-ref">model documentations</span></a> or the <a class="reference internal" href="apiref.html#kpi-doc"><span class="std std-ref">KPI documentation</span></a>). To get the current KPIs, the command</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kpi_results</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">get_kpi</span><span class="p">()</span>
</pre></div>
</div>
<p>is used. For a detailed example of the KPI use, see <a class="reference internal" href="Examples.html#kpi-ex"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="using-wrappers">
<h2>Using Wrappers<a class="headerlink" href="#using-wrappers" title="Permalink to this headline">¶</a></h2>
<p>For control, it may be useful to rescale automatically outputs and inputs, or to downsample the interactions with the simulation. This possibility is offered thanks to the implementation of wrappers
around the main Env class.  We provide an example  of iterative application of wrappers below. It leads to a rescaled, downsampled and RL-type step environment ( at the latest wrapper stage, the step method is transformed to
gives the same outputs as the  gym step method, i.e. outputs, reward, done, info = step (..).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">energym</span>
<span class="kn">from</span> <span class="nn">energym.wrappers.downsample_outputs</span> <span class="kn">import</span> <span class="n">DownsampleOutputs</span>
<span class="kn">from</span> <span class="nn">energym.wrappers.rescale_outputs</span> <span class="kn">import</span> <span class="n">RescaleOutputs</span>
<span class="kn">from</span> <span class="nn">energym.wrappers.rl_wrapper</span> <span class="kn">import</span> <span class="n">RLWrapper</span>

<span class="n">weather</span> <span class="o">=</span> <span class="s2">&quot;ESP_CT_Barcelona&quot;</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">energym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;Apartments2Thermal-v0&quot;</span><span class="p">,</span> <span class="n">weather</span><span class="o">=</span><span class="n">weather</span><span class="p">,</span> <span class="n">simulation_days</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>

<span class="n">downsampling_dic</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1">#define how keys are downsampled (e.g. {key1: np.mean, key2: ... }</span>
<span class="n">lower_bound</span> <span class="o">=</span>  <span class="o">...</span> <span class="c1">#define how keys are rescaled (lower and upper bounds) (e.g. lower_bound = {key1: 0.0, ...})</span>
<span class="k">def</span> <span class="nf">reward</span> <span class="o">=</span> <span class="o">...</span> <span class="c1">#define the reward function</span>


<span class="n">env_down</span> <span class="o">=</span> <span class="n">DownsampleOutputs</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">steps</span><span class="p">,</span> <span class="n">downsampling_dic</span><span class="p">)</span>
<span class="n">env_down_res</span> <span class="o">=</span> <span class="n">RescaleOutputs</span><span class="p">(</span><span class="n">env_down</span><span class="p">,</span><span class="n">lower_bound</span><span class="p">,</span><span class="n">upper_bound</span><span class="p">)</span>
<span class="n">env_down_RL</span> <span class="o">=</span> <span class="n">RLWrapper</span><span class="p">(</span><span class="n">env_down_res</span><span class="p">,</span> <span class="n">reward</span><span class="p">)</span>
</pre></div>
</div>
<p>Forecasts are automatically adapted to match the chosen rescaling and downsampling.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="install_min.html" title="previous page">Minimal Installation</a>
    <a class='right-next' id="next-link" href="Examples.html" title="next page">Examples</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.1e043a052b0af929e4d8.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, psh, bsl, tgi.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>